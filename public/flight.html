<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>운항 정보 페이지</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <!--CORS 무시-->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

    <!-- Semantic -->
    <link rel="stylesheet" type="text/css" href="semantic/semantic.min.css">
    <!--배경 색을 지정함-->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="semantic/semantic.min.js"></script>

    <!-- DataTables -->
    <link rel="stylesheet" type="text/css" href="DataTables/datatables.min.css" />
    <script type="text/javascript" src="DataTables/datatables.min.js"></script>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/8.6.2/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/8.6.2/firebase-database.js"></script>
</head>

<body style="background-color: #FAFAFA;">
    <!-- 사이드 메뉴 -->
    <ul>
        <li><a class="home_btn" href="./index.html"><img src="./image/earth-globe.png"
                    style="margin-right: 13px; height: 35px;">요<span style="color: #F17F42;">지</span>경</a></li>
        <hr style="margin-top: 15px; margin-left: 20px; margin-right: 30px;">

        <!-- 검색 -->
        <div class="ui search" style="margin-top: 20px; margin-left: 20px;">
            <div class="ui icon input">
                <input class="prompt" type="text" placeholder="나라 검색">
                <i class="search icon"></i>
            </div>
            <div class="results"></div>
        </div>

        <li><a class="vaccine_btn" href="./vaccine.html"><img src="./image/syringe.png" style="margin-right: 12px; height: 25px;">백신
                정보</a></li>
        <li><a class="flight_btn" href="./flight.html"><img src="./image/airplane.png"
                    style="margin-right: 10px; height: 28px;">운항 정보</a></li>
        <li><a class="recent_btn" href="./recent.html"><img src="./image/earth.png"
                    style="margin-right: 15px; height: 22px;">나라별 최신 정보</a></li>
    </ul>

    <div id="wrap">
        <div id="content_box">
            <div class="content1" style="margin-left: 10%;">
                <table class="ui celled table" id="jsonTable">
                    <thead>
                        <tr>
                            <th>
                                <font style="vertical-align: inherit;">
                                    <font style="vertical-align: inherit;">ID</font>
                                </font>
                            </th>
                            <th>
                                <font style="vertical-align: inherit;">
                                    <font style="vertical-align: inherit;">국가이름</font>
                                </font>
                            </th>
                            <th>
                                <font style="vertical-align: inherit;">
                                    <font style="vertical-align: inherit;">제목</font>
                                </font>
                            </th>
                            <th>
                                <font style="vertical-align: inherit;">
                                    <font style="vertical-align: inherit;">작성일</font>
                                </font>
                            </th>
                        </tr>
                    </thead>
                </table>

                <script>

                    // DataTables 라이브러리를 사용해 table 구성
                    $(document).ready(function () {

                        $.getJSON('./Json/flight.json', function (json) {
                            $('#jsonTable').append("<tbody>");
                            for (var counter = 0; counter < json.length; counter++) {
                                $('#jsonTable').append("<tr><td>" + json[counter].id + "</td><td>" + json[counter].country_nm + `</td><td><a onclick="setChildValue(` + `${json[counter].id})` + `">` + json[counter].title + "</a></td><td>" + json[counter].wrt_dt + "</td></tr>");
                            }
                            $('#jsonTable').append("</tbody>");
                            $('#jsonTable').DataTable();
                        });
                    });

                    function setChildValue(index) {
                        window.location.href = "flightview.html?index=" + index;
                    }
                </script>
            </div>
        </div>

</body>

</html>